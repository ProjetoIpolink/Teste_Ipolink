<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Ipolink - Em Breve</title>
ย ยย
ย ย ย ย <script src="https://cdn.tailwindcss.com"></script>
ย ยย
ย ย ย ย <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
ย ยย
ย ย ย ย <link rel="preconnect" href="https://fonts.googleapis.com">
ย ย <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
ย ย <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@700;800&display=swap" rel="stylesheet">
ย ยย
ย ย ย ย <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

ย ย <style>
ย ย ย ย /* Definindo as variรกveis de cor do seu projeto */
ย ย ย ย :root {
ย ย ย ย ย ย --color-primary-green: #4C704B;
ย ย ย ย ย ย --color-secondary-brown: #8B5E3C;
ย ย ย ย ย ย --color-text-strong-on-light: #1C1C1C;
ย ย ย ย ย ย --color-text-light-on-dark: #E0E0E0;
ย ย ย ย ย ย --color-highlight-yellow: #FFD700;
ย ย ย ย ย ย --color-background-main-dark-green: #2A3D2A;
ย ย ย ย }

ย ย ย ย /* Aplicando estilos base no corpo da pรกgina */
ย ย ย ย body {
ย ย ย ย ย ย font-family: 'Inter', sans-serif;
ย ย ย ย ย ย background-color: var(--color-background-main-dark-green);
ย ย ย ย ย ย color: var(--color-text-light-on-dark);
ย ย ย ย ย ย -webkit-font-smoothing: antialiased;
ย ย ย ย ย ย -moz-osx-font-smoothing: grayscale;
ย ย ย ย }

ย ย ย ย /* Aplicando a fonte Poppins para tรญtulos */
ย ย ย ย h1, h2, h3 {
ย ย ย ย ย ย font-family: 'Poppins', sans-serif;
ย ย ย ย }
ย ย ย ยย
ย ย ย ย /* Estilo para o Canvas do jogo */
ย ย ย ย #gameCanvas {
ย ย ย ย ย ย background-color: #3a5a39; /* Um verde mais escuro para o fundo da caverna */
ย ย ย ย ย ย border-radius: 0.5rem;
ย ย ย ย ย ย box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย /* Garante que o canvas se adapte ร largura do container */
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย /* Mantรฉm a proporรงรฃo de 4:5 */
ย ย ย ย ย ย aspect-ratio: 4 / 5;
ย ย ย ย }

ย ย ย ย /* Mensagem de novo recorde da plataforma */
ย ย ย ย #platform-record-message {
ย ย ย ย ย ย background: rgba(0,0,0,0.8);
ย ย ย ย ย ย border-radius: 0.5rem;
ย ย ย ย ย ย transition: opacity 0.3s ease-in-out;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย }
ย ย </style>
ย ยย
ย ย <script>
ย ย ย ย // Configurando o Tailwind para usar suas cores customizadas
ย ย ย ย tailwind.config = {
ย ย ย ย ย ย theme: {
ย ย ย ย ย ย ย ย extend: {
ย ย ย ย ย ย ย ย ย ย colors: {
ย ย ย ย ย ย ย ย ย ย ย ย 'primary-green': 'var(--color-primary-green)',
ย ย ย ย ย ย ย ย ย ย ย ย 'secondary-brown': 'var(--color-secondary-brown)',
ย ย ย ย ย ย ย ย ย ย ย ย 'text-strong-on-light': 'var(--color-text-strong-on-light)',
ย ย ย ย ย ย ย ย ย ย ย ย 'text-light-on-dark': 'var(--color-text-light-on-dark)',
ย ย ย ย ย ย ย ย ย ย ย ย 'highlight-yellow': 'var(--color-highlight-yellow)',
ย ย ย ย ย ย ย ย ย ย ย ย 'main-dark-green': 'var(--color-background-main-dark-green)',
ย ย ย ย ย ย ย ย ย ย },
ย ย ย ย ย ย ย ย ย ย fontFamily: {
ย ย ย ย ย ย ย ย ย ย ย ย 'sans': ['Inter', 'sans-serif'],
ย ย ย ย ย ย ย ย ย ย ย ย 'poppins': ['Poppins', 'sans-serif'],
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }
ย ย </script>
</head>
<body class="bg-main-dark-green">

ย ย <div class="flex flex-col items-center justify-center min-h-screen text-center w-full p-4 sm:p-6 py-12">
ย ย ย ยย
ย ย ย ย <div class="w-full max-w-3xl mb-12">
ย ย ย ย ย ย <h1 class="text-6xl sm:text-7xl font-extrabold mb-6">
ย ย ย ย ย ย ย ย <span class="text-secondary-brown">ipo</span><span class="text-primary-green">link</span>
ย ย ย ย ย ย </h1>

ย ย ย ย ย ย <h2 class="font-poppins text-2xl sm:text-3xl font-bold text-white mb-4 max-w-2xl mx-auto">
ย ย ย ย ย ย ย ย Estamos construindo uma nova conexรฃo para o turismo de Iporanga.
ย ย ย ย ย ย </h2>
ย ย ย ย ย ยย
ย ย ย ย ย ย <p class="text-lg text-text-light-on-dark mb-8 max-w-lg mx-auto">
ย ย ย ย ย ย ย ย O portal completo estarรก no ar em breve, cheio de novidades para explorar a cidade como nunca antes!
ย ย ย ย ย ย </p>

ย ย ย ย ย ย <p class="text-lg font-semibold text-highlight-yellow mb-6">
ย ย ย ย ย ย ย ย Nos siga no Instagram para nรฃo perder o lanรงamento!
ย ย ย ย ย ย </p>

ย ย ย ย ย ย <a href="https://www.instagram.com/ipolink.site/" target="_blank" rel="noopener noreferrer"ย
ย ย ย ย ย ย ย ยclass="inline-flex items-center bg-highlight-yellow text-text-strong-on-light font-poppins font-bold py-3 px-8 rounded-lg text-lg shadow-lg hover:bg-yellow-500 transition-all duration-300 transform hover:scale-105">
ย ย ย ย ย ย ย ย <i class="fab fa-instagram mr-3"></i>
ย ย ย ย ย ย ย ย Acompanhe no Instagram
ย ย ย ย ย ย </a>
ย ย ย ย </div>

ย ย ย ย <div class="w-full max-w-sm md:max-w-md mx-auto relative">
ย ย ย ย ย ย ย<p class="font-poppins text-xl font-bold text-white mb-4">Enquanto isso, que tal um voo pela caverna?</p>
ย ย ย ย ย ย <canvas id="gameCanvas"></canvas>
ย ย ย ย ย ย <div id="platform-record-message" class="absolute inset-0 flex flex-col justify-center items-center p-4 text-white opacity-0 hidden">
ย ย ย ย ย ย ย ย <div id="record-title" class="font-poppins text-2xl sm:text-3xl font-bold text-highlight-yellow mb-2"></div>
ย ย ย ย ย ย ย ย <p id="record-text" class="text-base sm:text-lg"></p>
ย ย ย ย ย ย ย ย <p class="mt-4 text-sm font-semibold">Tire um print e nos mande!</p>
ย ย ย ย ย ย ย ย <button id="play-again-button" class="mt-6 bg-highlight-yellow text-text-strong-on-light font-poppins font-bold py-2 px-6 rounded-lg text-base shadow-lg hover:bg-yellow-500 transition-colors">
ย ย ย ย ย ย ย ย ย ย Jogar Novamente
ย ย ย ย ย ย ย ย </button>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="mt-10 w-full max-w-sm md:max-w-md mx-auto text-center">
ย ย ย ย ย ย <h3 class="font-poppins text-2xl font-bold text-highlight-yellow mb-4">
ย ย ย ย ย ย ย ย ๐ Top 3 da Caverna ๐
ย ย ย ย ย ย </h3>
ย ย ย ย ย ย <div id="leaderboard" class="bg-primary-green/50 rounded-lg p-6 space-y-4">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย <p class="mt-6 text-text-light-on-dark/90 leading-relaxed px-4">
ย ย ย ย ย ย ย ย Fez uma pontuaรงรฃo alta? Mande um print da sua tela de "Fim de Jogo" para nosso Instagramย
ย ย ย ย ย ย ย ย <a href="https://www.instagram.com/ipolink.site/" target="_blank" rel="noopener noreferrer" class="text-highlight-yellow font-bold underline hover:text-yellow-300">@ipolink.site</a>
ย ย ย ย ย ย ย ย e entre para o ranking!
ย ย ย ย ย ย </p>
ย ย ย ย </div>
ย ย </div>

ย ย <script>
ย ย ย ย document.addEventListener('DOMContentLoaded', () => {
ย ย ย ย ย ย const canvas = document.getElementById('gameCanvas');
ย ย ย ย ย ย const ctx = canvas.getContext('2d');
ย ย ย ย ย ย const platformRecordMessage = document.getElementById('platform-record-message');
ย ย ย ย ย ย const recordTitle = document.getElementById('record-title');
ย ย ย ย ย ย const recordText = document.getElementById('record-text');
ย ย ย ย ย ย const leaderboardDiv = document.getElementById('leaderboard');

ย ย ย ย ย ย // --- EFEITOS SONOROS ---
ย ย ย ย ย ย const flapSound = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0 } }).toDestination();
ย ย ย ย ย ย flapSound.volume.value = -10;
ย ย ย ย ย ย const scoreSound = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.2 } }).toDestination();
ย ย ย ย ย ย scoreSound.volume.value = -5;
ย ย ย ย ย ย const hitSound = new Tone.MembraneSynth().toDestination();
ย ย ย ย ย ย const personalRecordSynth = new Tone.FMSynth().toDestination();
ย ย ย ย ย ย const personalRecordMelody = new Tone.Sequence((time, note) => { personalRecordSynth.triggerAttackRelease(note, '8n', time); }, ['C5', 'E5', 'G5', 'C6'], '8n');
ย ย ย ย ย ย personalRecordMelody.loop = false;
ย ย ย ย ย ย const platformRecordSynth = new Tone.PolySynth(Tone.Synth).toDestination();
ย ย ย ย ย ย const platformRecordMelody = new Tone.Sequence((time, note) => { platformRecordSynth.triggerAttackRelease(note, "8n", time); }, [ ['C5', 'G5'], null, ['E5', 'B5'], null, ['G5', 'D6'], null, ['C6', 'G6'] ]);
ย ย ย ย ย ย platformRecordMelody.loop = false;

ย ย ย ย ย ย // --- LรGICA DO LEADERBOARD ---
ย ย ย ย ย ย let leaderboard = [];
ย ย ย ย ย ย const medals = ['๐ฅ', '๐ฅ', '๐ฅ'];
ย ย ย ย ย ยย
ย ย ย ย ย ย function renderLeaderboard() {
ย ย ย ย ย ย ย ย leaderboardDiv.innerHTML = '';
ย ย ย ย ย ย ย ย leaderboard.forEach((entry, index) => {
ย ย ย ย ย ย ย ย ย ย const entryDiv = document.createElement('div');
ย ย ย ย ย ย ย ย ย ย entryDiv.className = 'flex justify-between items-center text-lg';
ย ย ย ย ย ย ย ย ย ย entryDiv.innerHTML = `
ย ย ย ย ย ย ย ย ย ย ย ย <span class="font-bold text-white">${medals[index]} ${index + 1}ยบ - ${entry.name}</span>
ย ย ย ย ย ย ย ย ย ย ย ย <span class="font-semibold text-highlight-yellow">${entry.score}</span>
ย ย ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย ย ย leaderboardDiv.appendChild(entryDiv);
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }

ย ย ย ย ย ย function updateLeaderboard(newScore) {
ย ย ย ย ย ย ย ย const lowestTopScore = leaderboard.length > 0 ? leaderboard[leaderboard.length - 1].score : 0;
ย ย ย ย ย ย ย ย if (newScore <= lowestTopScore && leaderboard.length >= 3) return 0;
ย ย ย ย ย ย ย ย leaderboard = leaderboard.filter(e => e.name !== 'Vocรช');
ย ย ย ย ย ย ย ย const playerEntry = { name: 'Vocรช', score: newScore };
ย ย ย ย ย ย ย ย leaderboard.push(playerEntry);
ย ย ย ย ย ย ย ย leaderboard.sort((a, b) => b.score - a.score);
ย ย ย ย ย ย ย ย leaderboard = leaderboard.slice(0, 3);
ย ย ย ย ย ย ย ย localStorage.setItem('ipolinkLeaderboard', JSON.stringify(leaderboard));
ย ย ย ย ย ย ย ย renderLeaderboard();
ย ย ย ย ย ย ย ย const newRank = leaderboard.findIndex(entry => entry.name === 'Vocรช') + 1;
ย ย ย ย ย ย ย ย return newRank;ย
ย ย ย ย ย ย }

ย ย ย ย ย ย function loadLeaderboard() {
ย ย ย ย ย ย ย ย const savedLeaderboard = localStorage.getItem('ipolinkLeaderboard');
ย ย ย ย ย ย ย ย if (savedLeaderboard) {
ย ย ย ย ย ย ย ย ย ย leaderboard = JSON.parse(savedLeaderboard);
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย leaderboard = [
ย ย ย ย ย ย ย ย ย ย ย ย { name: 'Otavio', score: 22 },
ย ย ย ย ย ย ย ย ย ย ย ย { name: 'Higor Matheus', score: 21 },
ย ย ย ย ย ย ย ย ย ย ย ย { name: '[Aguardando]', score: 0 }
ย ย ย ย ย ย ย ย ย ย ];
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย renderLeaderboard();
ย ย ย ย ย ย }

ย ย ย ย ย ย // Variรกveis do Jogo
ย ย ย ย ย ย let bat, obstacles, score, bestScore, gameState;
ย ย ย ย ย ย bestScore = localStorage.getItem('flappyBatBestScore') || 0;

ย ย ย ย ย ย let gravity = 0.5;
ย ย ย ย ย ย let lift = -8;
ย ย ย ย ย ย let obstacleWidth = 60;
ย ย ย ย ย ย let obstacleGap = 150;
ย ย ย ย ย ย let obstacleSpeed = 3;
ย ย ย ย ย ย let obstacleInterval = 90;ย
ย ย ย ย ย ย let batSize = 40;ย
ย ย ย ย ย ย let frameCount = 0;

ย ย ย ย ย ย function setGameScale() {
ย ย ย ย ย ย ย ย const screenWidth = canvas.width;
ย ย ย ย ย ย ย ย gravity = screenWidth * 0.00125;
ย ย ย ย ย ย ย ย lift = -screenWidth * 0.02;
ย ย ย ย ย ย ย ย obstacleSpeed = screenWidth * 0.0075;
ย ย ย ย ย ย ย ย obstacleWidth = screenWidth * 0.15;
ย ย ย ย ย ย ย ย obstacleGap = screenWidth * 0.375;
ย ย ย ย ย ย ย ย batSize = screenWidth * 0.1;
ย ย ย ย ย ย }

ย ย ย ย ย ย function resizeCanvas() {
ย ย ย ย ย ย ย ย canvas.width = canvas.clientWidth;
ย ย ย ย ย ย ย ย canvas.height = canvas.clientHeight;
ย ย ย ย ย ย ย ย setGameScale();
ย ย ย ย ย ย }

ย ย ย ย ย ย function init() {
ย ย ย ย ย ย ย ย bat = { x: canvas.width / 4, y: canvas.height / 2, velocity: 0 };
ย ย ย ย ย ย ย ย obstacles = [];
ย ย ย ย ย ย ย ย score = 0;
ย ย ย ย ย ย ย ย frameCount = 0;
ย ย ย ย ย ย ย ย gameState = 'start';
ย ย ย ย ย ย ย ย platformRecordMessage.classList.add('hidden', 'opacity-0');
ย ย ย ย ย ย ย ย Tone.Transport.stop();ย
ย ย ย ย ย ย ย ย Tone.Transport.cancel();
ย ย ย ย ย ย }

ย ย ย ย ย ย function flap() {
ย ย ย ย ย ย ย ย if (Tone.context.state !== 'running') { Tone.start(); }
ย ย ย ย ย ย ย ย if (gameState === 'playing') {
ย ย ย ย ย ย ย ย ย ย bat.velocity = lift;
ย ย ย ย ย ย ย ย ย ย flapSound.triggerAttackRelease("0.05");
ย ย ย ย ย ย ย ย } else if (gameState === 'start' || gameState === 'gameOver') {
ย ย ย ย ย ย ย ย ย ย init();
ย ย ย ย ย ย ย ย ย ย gameState = 'playing';
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }

ย ย ย ย ย ย function drawBat() {
ย ย ย ย ย ย ย ย ctx.save();
ย ย ย ย ย ย ย ย ctx.translate(bat.x, bat.y);
ย ย ย ย ย ย ย ย const rotation = Math.atan(bat.velocity / 12);
ย ย ย ย ย ย ย ย ctx.rotate(rotation);
ย ย ย ย ย ย ย ย ctx.font = `${batSize}px sans-serif`;
ย ย ย ย ย ย ย ย ctx.textAlign = 'center';
ย ย ย ย ย ย ย ย ctx.textBaseline = 'middle';
ย ย ย ย ย ย ย ย ctx.fillText('๐ฆ', 0, 0);
ย ย ย ย ย ย ย ย ctx.restore();
ย ย ย ย ย ย }

ย ย ย ย ย ย function drawObstacles() {
ย ย ย ย ย ย ย ย ctx.fillStyle = '#848482';
ย ย ย ย ย ย ย ย obstacles.forEach(obstacle => {
ย ย ย ย ย ย ย ย ย ย ctx.beginPath();
ย ย ย ย ย ย ย ย ย ย ctx.moveTo(obstacle.x, 0);
ย ย ย ย ย ย ย ย ย ย ctx.lineTo(obstacle.x + obstacleWidth, 0);
ย ย ย ย ย ย ย ย ย ย ctx.lineTo(obstacle.x + obstacleWidth / 2, obstacle.topHeight);
ย ย ย ย ย ย ย ย ย ย ctx.fill();
ย ย ย ย ย ย ย ย ย ย ctx.beginPath();
ย ย ย ย ย ย ย ย ย ย ctx.moveTo(obstacle.x, canvas.height);
ย ย ย ย ย ย ย ย ย ย ctx.lineTo(obstacle.x + obstacleWidth, canvas.height);
ย ย ย ย ย ย ย ย ย ย ctx.lineTo(obstacle.x + obstacleWidth / 2, canvas.height - obstacle.bottomHeight);
ย ย ย ย ย ย ย ย ย ย ctx.fill();
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย function drawScore() {
ย ย ย ย ย ย ย ย ctx.fillStyle = 'white';
ย ย ย ย ย ย ย ย ctx.font = `bold ${canvas.width * 0.09}px 'Poppins'`;
ย ย ย ย ย ย ย ย ctx.textAlign = 'center';
ย ย _message.classList.contains('hidden')) {
ย ย ย ย ย ย ย ย ย ย ctx.font = `bold ${canvas.width * 0.12}px 'Poppins'`;
ย ย ย ย ย ย ย ย ย ย ctx.fillText('Fim de Jogo', canvas.width / 2, canvas.height / 2 - canvas.height * 0.1);
ย ย ย ย ย ย ย ย ย ย ctx.font = `${canvas.width * 0.06}px 'Inter'`;
ย ย ย ย ย ย ย ย ย ย ctx.fillText(`Pontos: ${score}`, canvas.width / 2, canvas.height / 2);
ย ย ย ย ย ย ย ย ย ย ctx.fillText(`Melhor: ${bestScore}`, canvas.width / 2, canvas.height / 2 + canvas.height * 0.06);
ย ย ย ย ย ย ย ย ย ย ctx.font = `${canvas.width * 0.045}px 'Inter'`;
ย ย ย ย ย ย ย ย ย ย ctx.fillText('Clique para tentar de novo', canvas.width / 2, canvas.height / 2 + canvas.height * 0.16);
ย ย ย ย ย ย ย ย } else if (gameState === 'start') {
ย ย ย ย ย ย ย ย ย ย ctx.font = `bold ${canvas.width * 0.075}px 'Poppins'`;
ย ย ย ย ย ย ย ย ย ย ctx.fillText('Clique para Voar', canvas.width / 2, canvas.height / 2);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย function update() {
ย ย ย ย ย ย ย ย if (gameState !== 'playing') return;
ย ย ย ย ย ย ย ย frameCount++;
ย ย ย ย ย ย ย ย bat.velocity += gravity;
ย ย ย ย ย ย ย ย bat.y += bat.velocity;
ย ย ย ย ย ย ย ย if (bat.y > canvas.height - batSize / 2 || bat.y < batSize / 2) gameOver();
ย ย ย ย ย ย ย ย if (frameCount % obstacleInterval === 0) {
ย ย ย ย ย ย ย ย ย ย const topHeight = Math.random() * (canvas.height - obstacleGap - (canvas.height * 0.1)) + (canvas.height * 0.05);
ย ย ย ย ย ย ย ย ย ย obstacles.push({ x: canvas.width, topHeight, bottomHeight: canvas.height - topHeight - obstacleGap, passed: false });
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย obstacles.forEach(obstacle => {
ย ย ย ย ย ย ย ย ย ย obstacle.x -= obstacleSpeed;
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย // --- CORREรรO DA HITBOX ---
ย ย ย ย ย ย ย ย ย ย const batHitBox = batSize * 0.3; // Hitbox do morcego reduzida
ย ย ย ย ย ย ย ย ย ย const obstacleCollisionWidth = obstacleWidth * 0.6;ย
ย ย ย ย ย ย ย ย ย ย const padding = (obstacleWidth - obstacleCollisionWidth) / 2;

ย ย ย ย ย ย ย ย ย ย if (ย
ย ย ย ย ย ย ย ย ย ย ย ย bat.x + batHitBox > obstacle.x + padding &&ย
ย ย ย ย ย ย ย ย ย ย ย ย bat.x - batHitBox < obstacle.x + obstacleWidth - padding &&ย
ย ย ย ย ย ย ย ย ย ย ย ย (bat.y - batHitBox < obstacle.topHeight || bat.y + batHitBox > canvas.height - obstacle.bottomHeight)
ย ย ย ย ย ย ย ย ย ย ) {
ย ย ย ย ย ย ย ย ย ย ย ย gameOver();
ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย if (obstacle.x + obstacleWidth < bat.x && !obstacle.passed) {
ย ย ย ย ย ย ย ย ย ย ย ย score++;
ย ย ย ย ย ย ย ย ย ย ย ย scoreSound.triggerAttackRelease("C6", "8n");
ย ย ย ย ย ย ย ย ย ย ย ย obstacle.passed = true;
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย obstacles = obstacles.filter(obstacle => obstacle.x + obstacleWidth > 0);
ย ย ย ย ย ย }

ย ย ย ย ย ย function draw() {
ย ย ย ย ย ย ย ย ctx.clearRect(0, 0, canvas.width, canvas.height);
ย ย ย ย ย ย ย ย drawBat();
ย ย ย ย ย ย ย ย drawObstacles();
ย ย ย ย ย ย ย ย drawScore();
ย ย ย ย ย ย }
ย ย ย ย ย ยย
ย ย ย ย ย ย function gameOver() {
ย ย ย ย ย ย ย ย if (gameState !== 'playing') return;
ย ย ย ย ย ย ย ย hitSound.triggerAttackRelease("C2", "4n");
ย ย ย ย ย ย ย ย gameState = 'gameOver';
ย ย ย ย ย ย ย ย const previousBestScore = bestScore;
ย ย ย ย ย ย ย ย if (score > bestScore) {
ย ย ย ย ย ย ย ย ย ย bestScore = score;
ย ย ย ย ย ย ย ย ย ย localStorage.setItem('flappyBatBestScore', bestScore);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย const newRank = updateLeaderboard(score);
ย ย ย ย ย ย ย ย if (newRank > 0) {
ย ย ย ย ย ย ย ย ย ย ยTone.Transport.start();
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย if (newRank === 1) {
ย ย ย ย ย ย ย ย ย ย recordTitle.textContent = "NOVO RECORDE!";
ย ย ย ย ย ย ย ย ย ย recordText.innerHTML = `Vocรช assumiu o 1ยบ lugar com <strong>${score}</strong> pontos!`;
ย ย ย ย ย ย ย ย ย ย platformRecordMessage.classList.remove('hidden');
ย ย ย ย ย ย ย ย ย ย setTimeout(() => platformRecordMessage.classList.remove('opacity-0'), 10);
ย ย ย ย ย ย ย ย ย ย platformRecordMelody.start();
ย ย ย ย ย ย ย ย } else if (newRank > 1) {
ย ย ย ย ย ย ย ย ย ย recordTitle.textContent = "TOP 3!";
ย ย ย ย ย ย ย ย ย ย recordText.innerHTML = `Vocรช conquistou o <strong>${newRank}ยบ lugar</strong> com <strong>${score}</strong> pontos!`;
ย ย ย ย ย ย ย ย ย ย platformRecordMessage.classList.remove('hidden');
ย ย ย ย ย ย ย ย ย ย setTimeout(() => platformRecordMessage.classList.remove('opacity-0'), 10);
ย ย ย ย ย ย ย ย ย ย personalRecordMelody.start();
ย ย ย ย ย ย ย ย } else if (score > previousBestScore) {
ย ย ย ย ย ย ย ย ย ย personalRecordMelody.start();
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }

ย ย ย ย ย ย function gameLoop() {
ย ย ย ย ย ย ย ย update();
ย ย ย ย ย ย ย ย draw();
ย ย ย ย ย ย ย ย requestAnimationFrame(gameLoop);
ย ย ย ย ย ย }

ย ย ย ย ย ย // Iniciar o jogo
ย ย ย ย ย ย window.addEventListener('resize', () => {
ย ย ย ย ย ย ย ย resizeCanvas();
ย ย ย ย ย ย ย ย init();
ย ย ย ย ย ย });
ย ย ย ย ย ยย
ย ย ย ย ย ย loadLeaderboard();
ย ย ย ย ย ย resizeCanvas();
ย ย ย ย ย ย init();
ย ย ย ย ย ย gameLoop();
ย ย ย ย ย ยย
ย ย ย ย ย ย // Adiciona evento de clique para reiniciar
ย ย ย ย ย ย canvas.addEventListener('click', flap);
ย ย ย ย ย ย canvas.addEventListener('touchstart', (e) => { e.preventDefault(); flap(); });
ย ย ย ย ย ย window.addEventListener('keydown', (e) => { if (e.code === 'Space') { e.preventDefault(); flap(); } });
ย ย ย ย ย ย // Adiciona evento de clique ao overlay de recorde
ย ย ย ย ย ย platformRecordMessage.addEventListener('click', flap);
ย ย ย ย });
ย ย </script>
</body>
</html>
```

