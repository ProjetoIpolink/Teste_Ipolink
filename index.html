<!DOCTYPE html>

<html lang="pt-BR">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Ipolink - Em Breve</title>

Â  Â Â 

Â  Â  <!-- Tailwind CSS via CDN -->

Â  Â  <script src="https://cdn.tailwindcss.com"></script>

Â  Â Â 

Â  Â  <!-- Font Awesome (para Ã­cones) -->

Â  Â  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

Â  Â Â 

Â  Â  <!-- Google Fonts (Poppins e Inter) -->

Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">

Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@700;800&display=swap" rel="stylesheet">

Â  Â Â 

Â  Â  <!-- Tone.js para efeitos sonoros -->

Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>



Â  Â  <style>

Â  Â  Â  Â  /* Definindo as variÃ¡veis de cor do seu projeto */

Â  Â  Â  Â  :root {

Â  Â  Â  Â  Â  Â  --color-primary-green: #4C704B;

Â  Â  Â  Â  Â  Â  --color-secondary-brown: #8B5E3C;

Â  Â  Â  Â  Â  Â  --color-text-strong-on-light: #1C1C1C;

Â  Â  Â  Â  Â  Â  --color-text-light-on-dark: #E0E0E0;

Â  Â  Â  Â  Â  Â  --color-highlight-yellow: #FFD700;

Â  Â  Â  Â  Â  Â  --color-background-main-dark-green: #2A3D2A;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Aplicando estilos base no corpo da pÃ¡gina */

Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: 'Inter', sans-serif;

Â  Â  Â  Â  Â  Â  background-color: var(--color-background-main-dark-green);

Â  Â  Â  Â  Â  Â  color: var(--color-text-light-on-dark);

Â  Â  Â  Â  Â  Â  -webkit-font-smoothing: antialiased;

Â  Â  Â  Â  Â  Â  -moz-osx-font-smoothing: grayscale;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Aplicando a fonte Poppins para tÃ­tulos */

Â  Â  Â  Â  h1, h2, h3 {

Â  Â  Â  Â  Â  Â  font-family: 'Poppins', sans-serif;

Â  Â  Â  Â  }

Â  Â  Â  Â Â 

Â  Â  Â  Â  /* Estilo para o Canvas do jogo */

Â  Â  Â  Â  #gameCanvas {

Â  Â  Â  Â  Â  Â  background-color: #3a5a39; /* Um verde mais escuro para o fundo da caverna */

Â  Â  Â  Â  Â  Â  border-radius: 0.5rem;

Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  position: relative;

Â  Â  Â  Â  Â  Â  /* Garante que o canvas se adapte Ã  largura do container */

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  /* MantÃ©m a proporÃ§Ã£o de 4:5 */

Â  Â  Â  Â  Â  Â  aspect-ratio: 4 / 5;

Â  Â  Â  Â  }



Â  Â  Â  Â  /* Mensagem de novo recorde da plataforma */

Â  Â  Â  Â  #platform-record-message {

Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.8);

Â  Â  Â  Â  Â  Â  border-radius: 0.5rem;

Â  Â  Â  Â  Â  Â  transition: opacity 0.3s ease-in-out;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  }

Â  Â  </style>

Â  Â Â 

Â  Â  <script>

Â  Â  Â  Â  // Configurando o Tailwind para usar suas cores customizadas

Â  Â  Â  Â  tailwind.config = {

Â  Â  Â  Â  Â  Â  theme: {

Â  Â  Â  Â  Â  Â  Â  Â  extend: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  colors: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'primary-green': 'var(--color-primary-green)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'secondary-brown': 'var(--color-secondary-brown)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'text-strong-on-light': 'var(--color-text-strong-on-light)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'text-light-on-dark': 'var(--color-text-light-on-dark)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'highlight-yellow': 'var(--color-highlight-yellow)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'main-dark-green': 'var(--color-background-main-dark-green)',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  fontFamily: {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'sans': ['Inter', 'sans-serif'],

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'poppins': ['Poppins', 'sans-serif'],

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }

Â  Â  </script>

</head>

<body class="bg-main-dark-green">



Â  Â  <div class="flex flex-col items-center justify-center min-h-screen text-center w-full p-4 sm:p-6 py-12">

Â  Â  Â  Â Â 

Â  Â  Â  Â  <div class="w-full max-w-3xl mb-12">

Â  Â  Â  Â  Â  Â  <h1 class="text-6xl sm:text-7xl font-extrabold mb-6">

Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-secondary-brown">ipo</span><span class="text-primary-green">link</span>

Â  Â  Â  Â  Â  Â  </h1>



Â  Â  Â  Â  Â  Â  <h2 class="font-poppins text-2xl sm:text-3xl font-bold text-white mb-4 max-w-2xl mx-auto">

Â  Â  Â  Â  Â  Â  Â  Â  Estamos construindo uma nova conexÃ£o para o turismo de Iporanga.

Â  Â  Â  Â  Â  Â  </h2>

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  <p class="text-lg text-text-light-on-dark mb-8 max-w-lg mx-auto">

Â  Â  Â  Â  Â  Â  Â  Â  O portal completo estarÃ¡ no ar em breve, cheio de novidades para explorar a cidade como nunca antes!

Â  Â  Â  Â  Â  Â  </p>



Â  Â  Â  Â  Â  Â  <p class="text-lg font-semibold text-highlight-yellow mb-6">

Â  Â  Â  Â  Â  Â  Â  Â  Nos siga no Instagram para nÃ£o perder o lanÃ§amento!

Â  Â  Â  Â  Â  Â  </p>



Â  Â  Â  Â  Â  Â  <a href="https://www.instagram.com/ipolink.site/" target="_blank" rel="noopener noreferrer"Â 

Â  Â  Â  Â  Â  Â  Â  Â class="inline-flex items-center bg-highlight-yellow text-text-strong-on-light font-poppins font-bold py-3 px-8 rounded-lg text-lg shadow-lg hover:bg-yellow-500 transition-all duration-300 transform hover:scale-105">

Â  Â  Â  Â  Â  Â  Â  Â  <i class="fab fa-instagram mr-3"></i>

Â  Â  Â  Â  Â  Â  Â  Â  Acompanhe no Instagram

Â  Â  Â  Â  Â  Â  </a>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="w-full max-w-sm md:max-w-md mx-auto relative">

Â  Â  Â  Â  Â  Â  Â <p class="font-poppins text-xl font-bold text-white mb-4">Enquanto isso, que tal um voo pela caverna?</p>

Â  Â  Â  Â  Â  Â  <canvas id="gameCanvas"></canvas>

Â  Â  Â  Â  Â  Â  <div id="platform-record-message" class="absolute inset-0 flex flex-col justify-center items-center p-4 text-white opacity-0 hidden">

Â  Â  Â  Â  Â  Â  Â  Â  <div id="record-title" class="font-poppins text-2xl sm:text-3xl font-bold text-highlight-yellow mb-2"></div>

Â  Â  Â  Â  Â  Â  Â  Â  <p id="record-text" class="text-base sm:text-lg"></p>

Â  Â  Â  Â  Â  Â  Â  Â  <p class="mt-4 text-sm font-semibold">Tire um print e nos mande!</p>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="play-again-button" class="mt-6 bg-highlight-yellow text-text-strong-on-light font-poppins font-bold py-2 px-6 rounded-lg text-base shadow-lg hover:bg-yellow-500 transition-colors">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Jogar Novamente

Â  Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="mt-10 w-full max-w-sm md:max-w-md mx-auto text-center">

Â  Â  Â  Â  Â  Â  <h3 class="font-poppins text-2xl font-bold text-highlight-yellow mb-4">

Â  Â  Â  Â  Â  Â  Â  Â  ğŸ† Top 3 da Caverna ğŸ†

Â  Â  Â  Â  Â  Â  </h3>

Â  Â  Â  Â  Â  Â  <div id="leaderboard" class="bg-primary-green/50 rounded-lg p-6 space-y-4">

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <p class="mt-6 text-text-light-on-dark/90 leading-relaxed px-4">

Â  Â  Â  Â  Â  Â  Â  Â  Fez uma pontuaÃ§Ã£o alta? Mande um print da sua tela de "Fim de Jogo" para nosso InstagramÂ 

Â  Â  Â  Â  Â  Â  Â  Â  <a href="https://www.instagram.com/ipolink.site/" target="_blank" rel="noopener noreferrer" class="text-highlight-yellow font-bold underline hover:text-yellow-300">@ipolink.site</a>

Â  Â  Â  Â  Â  Â  Â  Â  e entre para o ranking!

Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  const canvas = document.getElementById('gameCanvas');

Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');

Â  Â  Â  Â  Â  Â  const platformRecordMessage = document.getElementById('platform-record-message');

Â  Â  Â  Â  Â  Â  const recordTitle = document.getElementById('record-title');

Â  Â  Â  Â  Â  Â  const recordText = document.getElementById('record-text');

Â  Â  Â  Â  Â  Â  const leaderboardDiv = document.getElementById('leaderboard');



Â  Â  Â  Â  Â  Â  // --- EFEITOS SONOROS ---

Â  Â  Â  Â  Â  Â  const flapSound = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.001, decay: 0.1, sustain: 0 } }).toDestination();

Â  Â  Â  Â  Â  Â  flapSound.volume.value = -10;

Â  Â  Â  Â  Â  Â  const scoreSound = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.2 } }).toDestination();

Â  Â  Â  Â  Â  Â  scoreSound.volume.value = -5;

Â  Â  Â  Â  Â  Â  const hitSound = new Tone.MembraneSynth().toDestination();

Â  Â  Â  Â  Â  Â  const personalRecordSynth = new Tone.FMSynth().toDestination();

Â  Â  Â  Â  Â  Â  const personalRecordMelody = new Tone.Sequence((time, note) => { personalRecordSynth.triggerAttackRelease(note, '8n', time); }, ['C5', 'E5', 'G5', 'C6'], '8n');

Â  Â  Â  Â  Â  Â  personalRecordMelody.loop = false;

Â  Â  Â  Â  Â  Â  const platformRecordSynth = new Tone.PolySynth(Tone.Synth).toDestination();

Â  Â  Â  Â  Â  Â  const platformRecordMelody = new Tone.Sequence((time, note) => { platformRecordSynth.triggerAttackRelease(note, "8n", time); }, [ ['C5', 'G5'], null, ['E5', 'B5'], null, ['G5', 'D6'], null, ['C6', 'G6'] ]);

Â  Â  Â  Â  Â  Â  platformRecordMelody.loop = false;



Â  Â  Â  Â  Â  Â  // --- LÃ“GICA DO LEADERBOARD ---

Â  Â  Â  Â  Â  Â  let leaderboard = [];

Â  Â  Â  Â  Â  Â  const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function renderLeaderboard() {

Â  Â  Â  Â  Â  Â  Â  Â  leaderboardDiv.innerHTML = '';

Â  Â  Â  Â  Â  Â  Â  Â  leaderboard.forEach((entry, index) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const entryDiv = document.createElement('div');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  entryDiv.className = 'flex justify-between items-center text-lg';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  entryDiv.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-white">${medals[index]} ${index + 1}Âº - ${entry.name}</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold text-highlight-yellow">${entry.score}</span>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  leaderboardDiv.appendChild(entryDiv);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function updateLeaderboard(newScore) {

Â  Â  Â  Â  Â  Â  Â  Â  const lowestTopScore = leaderboard.length > 0 ? leaderboard[leaderboard.length - 1].score : 0;

Â  Â  Â  Â  Â  Â  Â  Â  if (newScore <= lowestTopScore && leaderboard.length >= 3) return 0;

Â  Â  Â  Â  Â  Â  Â  Â  leaderboard = leaderboard.filter(e => e.name !== 'VocÃª');

Â  Â  Â  Â  Â  Â  Â  Â  const playerEntry = { name: 'VocÃª', score: newScore };

Â  Â  Â  Â  Â  Â  Â  Â  leaderboard.push(playerEntry);

Â  Â  Â  Â  Â  Â  Â  Â  leaderboard.sort((a, b) => b.score - a.score);

Â  Â  Â  Â  Â  Â  Â  Â  leaderboard = leaderboard.slice(0, 3);

Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('ipolinkLeaderboard', JSON.stringify(leaderboard));

Â  Â  Â  Â  Â  Â  Â  Â  renderLeaderboard();

Â  Â  Â  Â  Â  Â  Â  Â  const newRank = leaderboard.findIndex(entry => entry.name === 'VocÃª') + 1;

Â  Â  Â  Â  Â  Â  Â  Â  return newRank;Â 

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function loadLeaderboard() {

Â  Â  Â  Â  Â  Â  Â  Â  const savedLeaderboard = localStorage.getItem('ipolinkLeaderboard');

Â  Â  Â  Â  Â  Â  Â  Â  if (savedLeaderboard) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  leaderboard = JSON.parse(savedLeaderboard);

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  leaderboard = [

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'Otavio', score: 22 },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: 'Higor Matheus', score: 21 },

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  { name: '[Aguardando]', score: 0 }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ];

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  renderLeaderboard();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // VariÃ¡veis do Jogo

Â  Â  Â  Â  Â  Â  let bat, obstacles, score, bestScore, gameState;

Â  Â  Â  Â  Â  Â  bestScore = localStorage.getItem('flappyBatBestScore') || 0;



Â  Â  Â  Â  Â  Â  let gravity = 0.5;

Â  Â  Â  Â  Â  Â  let lift = -8;

Â  Â  Â  Â  Â  Â  let obstacleWidth = 60;

Â  Â  Â  Â  Â  Â  let obstacleGap = 150;

Â  Â  Â  Â  Â  Â  let obstacleSpeed = 3;

Â  Â  Â  Â  Â  Â  let obstacleInterval = 90;Â 

Â  Â  Â  Â  Â  Â  let batSize = 40;Â 

Â  Â  Â  Â  Â  Â  let frameCount = 0;



Â  Â  Â  Â  Â  Â  function setGameScale() {

Â  Â  Â  Â  Â  Â  Â  Â  const screenWidth = canvas.width;

Â  Â  Â  Â  Â  Â  Â  Â  gravity = screenWidth * 0.00125;

Â  Â  Â  Â  Â  Â  Â  Â  lift = -screenWidth * 0.02;

Â  Â  Â  Â  Â  Â  Â  Â  obstacleSpeed = screenWidth * 0.0075;

Â  Â  Â  Â  Â  Â  Â  Â  obstacleWidth = screenWidth * 0.15;

Â  Â  Â  Â  Â  Â  Â  Â  obstacleGap = screenWidth * 0.375;

Â  Â  Â  Â  Â  Â  Â  Â  batSize = screenWidth * 0.1;

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function resizeCanvas() {

Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = canvas.clientWidth;

Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = canvas.clientHeight;

Â  Â  Â  Â  Â  Â  Â  Â  setGameScale();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function init() {

Â  Â  Â  Â  Â  Â  Â  Â  bat = { x: canvas.width / 4, y: canvas.height / 2, velocity: 0 };

Â  Â  Â  Â  Â  Â  Â  Â  obstacles = [];

Â  Â  Â  Â  Â  Â  Â  Â  score = 0;

Â  Â  Â  Â  Â  Â  Â  Â  frameCount = 0;

Â  Â  Â  Â  Â  Â  Â  Â  gameState = 'start';

Â  Â  Â  Â  Â  Â  Â  Â  platformRecordMessage.classList.add('hidden', 'opacity-0');

Â  Â  Â  Â  Â  Â  Â  Â  Tone.Transport.stop();Â 

Â  Â  Â  Â  Â  Â  Â  Â  Tone.Transport.cancel();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function flap() {

Â  Â  Â  Â  Â  Â  Â  Â  if (Tone.context.state !== 'running') { Tone.start(); }

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState === 'playing') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bat.velocity = lift;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flapSound.triggerAttackRelease("0.05");

Â  Â  Â  Â  Â  Â  Â  Â  } else if (gameState === 'start' || gameState === 'gameOver') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  init();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameState = 'playing';

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function drawBat() {

Â  Â  Â  Â  Â  Â  Â  Â  ctx.save();

Â  Â  Â  Â  Â  Â  Â  Â  ctx.translate(bat.x, bat.y);

Â  Â  Â  Â  Â  Â  Â  Â  const rotation = Math.atan(bat.velocity / 12);

Â  Â  Â  Â  Â  Â  Â  Â  ctx.rotate(rotation);

Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `${batSize}px sans-serif`;

Â  Â  Â  Â  Â  Â  Â  Â  ctx.textAlign = 'center';

Â  Â  Â  Â  Â  Â  Â  Â  ctx.textBaseline = 'middle';

Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText('ğŸ¦‡', 0, 0);

Â  Â  Â  Â  Â  Â  Â  Â  ctx.restore();

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function drawObstacles() {

Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = '#848482';

Â  Â  Â  Â  Â  Â  Â  Â  obstacles.forEach(obstacle => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.moveTo(obstacle.x, 0);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineTo(obstacle.x + obstacleWidth, 0);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineTo(obstacle.x + obstacleWidth / 2, obstacle.topHeight);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.beginPath();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.moveTo(obstacle.x, canvas.height);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineTo(obstacle.x + obstacleWidth, canvas.height);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.lineTo(obstacle.x + obstacleWidth / 2, canvas.height - obstacle.bottomHeight);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fill();

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function drawScore() {

Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillStyle = 'white';

Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `bold ${canvas.width * 0.09}px 'Poppins'`;

Â  Â  Â  Â  Â  Â  Â  Â  ctx.textAlign = 'center';

Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText(score, canvas.width / 2, canvas.height * 0.1);

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState === 'gameOver' && platformRecordMessage.classList.contains('hidden')) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `bold ${canvas.width * 0.12}px 'Poppins'`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText('Fim de Jogo', canvas.width / 2, canvas.height / 2 - canvas.height * 0.1);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `${canvas.width * 0.06}px 'Inter'`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText(`Pontos: ${score}`, canvas.width / 2, canvas.height / 2);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText(`Melhor: ${bestScore}`, canvas.width / 2, canvas.height / 2 + canvas.height * 0.06);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `${canvas.width * 0.045}px 'Inter'`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText('Clique para tentar de novo', canvas.width / 2, canvas.height / 2 + canvas.height * 0.16);

Â  Â  Â  Â  Â  Â  Â  Â  } else if (gameState === 'start') {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.font = `bold ${canvas.width * 0.075}px 'Poppins'`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ctx.fillText('Clique para Voar', canvas.width / 2, canvas.height / 2);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function update() {

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState !== 'playing') return;

Â  Â  Â  Â  Â  Â  Â  Â  frameCount++;

Â  Â  Â  Â  Â  Â  Â  Â  bat.velocity += gravity;

Â  Â  Â  Â  Â  Â  Â  Â  bat.y += bat.velocity;

Â  Â  Â  Â  Â  Â  Â  Â  if (bat.y > canvas.height - batSize / 2 || bat.y < batSize / 2) gameOver();

Â  Â  Â  Â  Â  Â  Â  Â  if (frameCount % obstacleInterval === 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const topHeight = Math.random() * (canvas.height - obstacleGap - (canvas.height * 0.1)) + (canvas.height * 0.05);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  obstacles.push({ x: canvas.width, topHeight, bottomHeight: canvas.height - topHeight - obstacleGap, passed: false });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  obstacles.forEach(obstacle => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  obstacle.x -= obstacleSpeed;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // --- CORREÃ‡ÃƒO DA HITBOX ---

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const batHitBox = batSize * 0.3; // Hitbox do morcego reduzida

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const obstacleCollisionWidth = obstacleWidth * 0.6;Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const padding = (obstacleWidth - obstacleCollisionWidth) / 2;



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bat.x + batHitBox > obstacle.x + padding &&Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bat.x - batHitBox < obstacle.x + obstacleWidth - padding &&Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (bat.y - batHitBox < obstacle.topHeight || bat.y + batHitBox > canvas.height - obstacle.bottomHeight)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gameOver();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (obstacle.x + obstacleWidth < bat.x && !obstacle.passed) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  score++;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scoreSound.triggerAttackRelease("C6", "8n");

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  obstacle.passed = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  obstacles = obstacles.filter(obstacle => obstacle.x + obstacleWidth > 0);

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function draw() {

Â  Â  Â  Â  Â  Â  Â  Â  ctx.clearRect(0, 0, canvas.width, canvas.height);

Â  Â  Â  Â  Â  Â  Â  Â  drawBat();

Â  Â  Â  Â  Â  Â  Â  Â  drawObstacles();

Â  Â  Â  Â  Â  Â  Â  Â  drawScore();

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  function gameOver() {

Â  Â  Â  Â  Â  Â  Â  Â  if (gameState !== 'playing') return;

Â  Â  Â  Â  Â  Â  Â  Â  hitSound.triggerAttackRelease("C2", "4n");

Â  Â  Â  Â  Â  Â  Â  Â  gameState = 'gameOver';

Â  Â  Â  Â  Â  Â  Â  Â  const previousBestScore = bestScore;

Â  Â  Â  Â  Â  Â  Â  Â  if (score > bestScore) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bestScore = score;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('flappyBatBestScore', bestScore);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  const newRank = updateLeaderboard(score);

Â  Â  Â  Â  Â  Â  Â  Â  if (newRank > 0) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Tone.Transport.start();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (newRank === 1) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recordTitle.textContent = "NOVO RECORDE!";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recordText.innerHTML = `VocÃª assumiu o 1Âº lugar com <strong>${score}</strong> pontos!`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  platformRecordMessage.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => platformRecordMessage.classList.remove('opacity-0'), 10);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  platformRecordMelody.start();

Â  Â  Â  Â  Â  Â  Â  Â  } else if (newRank > 1) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recordTitle.textContent = "TOP 3!";

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  recordText.innerHTML = `VocÃª conquistou o <strong>${newRank}Âº lugar</strong> com <strong>${score}</strong> pontos!`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  platformRecordMessage.classList.remove('hidden');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => platformRecordMessage.classList.remove('opacity-0'), 10);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  personalRecordMelody.start();

Â  Â  Â  Â  Â  Â  Â  Â  } else if (score > previousBestScore) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  personalRecordMelody.start();

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  function gameLoop() {

Â  Â  Â  Â  Â  Â  Â  Â  update();

Â  Â  Â  Â  Â  Â  Â  Â  draw();

Â  Â  Â  Â  Â  Â  Â  Â  requestAnimationFrame(gameLoop);

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Iniciar o jogo

Â  Â  Â  Â  Â  Â  window.addEventListener('resize', () => {

Â  Â  Â  Â  Â  Â  Â  Â  resizeCanvas();

Â  Â  Â  Â  Â  Â  Â  Â  init();

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  loadLeaderboard();

Â  Â  Â  Â  Â  Â  resizeCanvas();

Â  Â  Â  Â  Â  Â  init();

Â  Â  Â  Â  Â  Â  gameLoop();

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Adiciona evento de clique para reiniciar

Â  Â  Â  Â  Â  Â  canvas.addEventListener('click', flap);

Â  Â  Â  Â  Â  Â  canvas.addEventListener('touchstart', (e) => { e.preventDefault(); flap(); });

Â  Â  Â  Â  Â  Â  window.addEventListener('keydown', (e) => { if (e.code === 'Space') { e.preventDefault(); flap(); } });

Â  Â  Â  Â  Â  Â  // Adiciona evento de clique ao overlay de recorde

Â  Â  Â  Â  Â  Â  platformRecordMessage.addEventListener('click', flap);

Â  Â  Â  Â  });

Â  Â  </script>

</body>

</html>
